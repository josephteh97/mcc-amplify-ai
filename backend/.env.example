# ============================================
# Amplify Floor Plan AI - Environment Configuration
# ============================================
# Copy this file to .env and update with your actual values
# Command: cp .env.example .env

# ============================================
# ANTHROPIC API (REQUIRED)
# ============================================
# Get your API key from: https://console.anthropic.com/
# Navigate to: Settings → API Keys → Create Key
ANTHROPIC_API_KEY=sk-ant-api03-REPLACE_WITH_YOUR_ACTUAL_KEY_HERE

# Alternative: OpenAI GPT-4 Vision (optional, if not using Claude)
# OPENAI_API_KEY=sk-REPLACE_WITH_YOUR_OPENAI_KEY

# ============================================
# WINDOWS REVIT SERVER (UPDATE WHEN READY)
# ============================================
# Leave as localhost:5000 until Windows Revit is installed
# Then update with actual Windows machine IP address
# Example: http://192.168.1.100:5000
WINDOWS_REVIT_SERVER=http://localhost:5000

# Secure API key for communication between Linux and Windows
# Generate with: openssl rand -hex 32
# MUST MATCH the api_key in Windows config.json
REVIT_SERVER_API_KEY=change-this-to-secure-random-key

# Timeout for Revit operations (seconds)
REVIT_TIMEOUT=300

# ============================================
# APPLICATION SETTINGS
# ============================================
APP_NAME=Amplify Floor Plan AI
APP_ENV=development
APP_HOST=0.0.0.0
APP_PORT=8000
DEBUG=true

# Secret key for session management (generate random string)
SECRET_KEY=generate-random-secret-key-here

# ============================================
# FILE UPLOAD SETTINGS
# ============================================
# Maximum upload size in bytes (50MB default)
MAX_UPLOAD_SIZE=52428800

# Allowed file extensions (comma-separated)
ALLOWED_EXTENSIONS=pdf,jpg,jpeg,png

# Storage directories (relative to linux_server/)
UPLOAD_DIR=data/uploads
PROCESSED_DIR=data/processed
OUTPUT_DIR=data/models

# ============================================
# DATABASE CONFIGURATION
# ============================================
# SQLite (for development/testing)
DATABASE_URL=sqlite:///./data/floorplan.db

# PostgreSQL (for production - optional)
# DATABASE_URL=postgresql://username:password@localhost:5432/floorplan_db

# ============================================
# REDIS (Optional - for task queue)
# ============================================
# If using Celery for background tasks
REDIS_URL=redis://localhost:6379/0

# ============================================
# ML MODEL SETTINGS
# ============================================
# YOLOv8 model weights path
YOLO_WEIGHTS_PATH=ml_models/weights/yolov8_floorplan.pt

# Detection confidence thresholds
DETECTION_CONFIDENCE=0.6
NMS_THRESHOLD=0.4

# Enable automatic model download if weights not found
AUTO_DOWNLOAD_MODELS=true

# ============================================
# PDF PROCESSING SETTINGS
# ============================================
# DPI for PDF to image conversion (higher = better quality, slower)
PDF_DPI=300

# Maximum image dimension (pixels)
IMAGE_MAX_SIZE=4096

# ============================================
# SCALE DETECTION SETTINGS
# ============================================
# Default scale if detection fails (1:100 means 1mm on paper = 100mm real)
DEFAULT_SCALE=100

# Enable automatic scale detection (uses OCR)
ENABLE_AUTO_SCALE=true

# OCR language (for Tesseract)
OCR_LANGUAGE=eng

# ============================================
# 3D GENERATION DEFAULTS
# ============================================
# All measurements in millimeters (mm)

# Default wall height (2800mm = 2.8m = standard residential)
DEFAULT_WALL_HEIGHT=2800

# Default floor slab thickness
DEFAULT_FLOOR_THICKNESS=200

# Default ceiling height (floor to ceiling)
DEFAULT_CEILING_HEIGHT=3000

# Default door height
DEFAULT_DOOR_HEIGHT=2100

# Default window sill height
DEFAULT_WINDOW_SILL_HEIGHT=900

# ============================================
# CORS SETTINGS (Frontend Origins)
# ============================================
# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:5173,http://localhost:3000,http://localhost

# ============================================
# LOGGING SETTINGS
# ============================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log file location
LOG_FILE=logs/app.log

# Maximum log file size (MB)
LOG_MAX_SIZE=10

# Number of backup log files to keep
LOG_BACKUP_COUNT=5

# ============================================
# FEATURE FLAGS
# ============================================
# Enable/disable specific features

# Enable 3D web viewer (glTF export)
ENABLE_WEB_VIEWER=true

# Enable IFC export (in addition to RVT)
ENABLE_IFC_EXPORT=false

# Enable multi-story detection
ENABLE_MULTI_STORY=false

# Enable batch processing
ENABLE_BATCH_PROCESSING=false

# ============================================
# PERFORMANCE SETTINGS
# ============================================
# Maximum concurrent processing jobs
MAX_CONCURRENT_JOBS=3

# Enable GPU acceleration for ML models (requires CUDA)
ENABLE_GPU=false

# Number of worker processes (0 = auto-detect based on CPU cores)
WORKER_PROCESSES=0

# ============================================
# SECURITY SETTINGS
# ============================================
# Enable API rate limiting
ENABLE_RATE_LIMITING=false

# Max requests per minute (if rate limiting enabled)
RATE_LIMIT_PER_MINUTE=60

# Enable HTTPS (for production)
ENABLE_HTTPS=false

# SSL certificate paths (if HTTPS enabled)
SSL_CERT_PATH=/path/to/cert.pem
SSL_KEY_PATH=/path/to/key.pem

# ============================================
# MONITORING & ANALYTICS (Optional)
# ============================================
# Sentry DSN for error tracking
# SENTRY_DSN=https://your-sentry-dsn-here

# Enable anonymous usage analytics
ENABLE_ANALYTICS=false

# ============================================
# DEVELOPMENT SETTINGS
# ============================================
# Enable hot reload for development
HOT_RELOAD=true

# Show detailed error messages (disable in production)
SHOW_DETAILED_ERRORS=true

# Enable debug toolbar
DEBUG_TOOLBAR=false

# Save processed images for debugging
SAVE_DEBUG_IMAGES=true

# ============================================
# NOTES FOR DEPLOYMENT
# ============================================
# 
# PRODUCTION CHECKLIST:
# - Set DEBUG=false
# - Set APP_ENV=production
# - Use strong SECRET_KEY (generate with: openssl rand -hex 32)
# - Use strong REVIT_SERVER_API_KEY
# - Set up PostgreSQL database (not SQLite)
# - Enable HTTPS with valid SSL certificates
# - Set LOG_LEVEL=WARNING or ERROR
# - Disable SHOW_DETAILED_ERRORS
# - Configure proper CORS_ORIGINS (your domain)
# - Set up Redis for production task queue
# - Enable rate limiting for API protection
# - Set up Sentry or other error tracking
# 
# WINDOWS SERVER SETUP:
# 1. Install Revit 2022+ on Windows machine
# 2. Note the Windows machine's IP address (ipconfig)
# 3. Update WINDOWS_REVIT_SERVER with that IP
# 4. Generate secure key: openssl rand -hex 32
# 5. Set REVIT_SERVER_API_KEY with that key
# 6. Use the SAME key in Windows config.json
# 
# GETTING CLAUDE API KEY:
# 1. Visit: https://console.anthropic.com/
# 2. Sign up or log in
# 3. Go to: Settings → API Keys
# 4. Click: Create Key
# 5. Copy key (starts with sk-ant-api03-...)
# 6. Paste as ANTHROPIC_API_KEY value above
# 
# TESTING CONFIGURATION:
# Run: python -c "from dotenv import load_dotenv; import os; load_dotenv(); print('API Key:', os.getenv('ANTHROPIC_API_KEY')[:20])"
#
